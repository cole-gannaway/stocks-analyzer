(this["webpackJsonpstocks-analyzer"]=this["webpackJsonpstocks-analyzer"]||[]).push([[0],{128:function(t,e,a){},138:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),s=(a(128),a(62)),i=s.c,u=a(177),l=a(179),d=a(175),j=a(176),b=a(178),m=a(174),f=a(171),p=a(173),h=a(100),O=a.n(h),v=a(93);function x(t){var e=t[0],a=parseInt(t[1]),n=parseFloat(t[2]),r=parseFloat(t[3]);return{symbol:e,date:isNaN(a)?-1:a,amount:isNaN(n)?-1:n,price:isNaN(r)?-1:r}}var y=a(24),g=a(99),S=a.n(g),w=a(97),C=a.n(w),A=a(98),k=a.n(A),D=a(182);var E=a(23),P=a(181),T=a(102),M=a(6);function R(t){return Object(M.jsx)(E.a,{utils:T.a,children:Object(M.jsx)(P.a,{margin:"normal",format:"MM/dd/yyyy",value:function(t){var e=new Date(t);return function(t){var e=t+1;return e<10?"0"+e.toString():e.toString()}(e.getMonth())+"/"+function(t){return t<10?"0"+t.toString():t.toString()}(e.getDate())+"/"+e.getFullYear().toString()}(t.value),onChange:function(e){e&&t.onChange(e.getTime())},variant:"dialog",KeyboardButtonProps:{"aria-label":"change date"}})})}function F(t,e){return Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function N(t,e){var a=t.toFixed(e);return"0.00"!==a?a:t.toString()}function z(t){var e=Object(n.useState)(!1),a=Object(y.a)(e,2),r=a[0],c=a[1],o=Object(n.useState)(t.data.symbol),s=Object(y.a)(o,2),i=s[0],u=s[1],l=Object(n.useState)(t.data.date),j=Object(y.a)(l,2),b=j[0],f=j[1],p=Object(n.useState)(t.data.amount),h=Object(y.a)(p,2),O=h[0],v=h[1],x=Object(n.useState)(t.data.price),g=Object(y.a)(x,2),w=g[0],A=g[1],E=new Date(t.data.date),P=new Intl.NumberFormat("en-US"),T=0===t.data.amount?"neither":t.data.amount>0?"buy":"sell",N="buy"===T?"red":"sell"===T?"green":"black",z=t.isUsed?"line-through":"none";function I(){c(!r)}return Object(M.jsxs)(m.a,{children:[Object(M.jsx)(d.a,{children:r?Object(M.jsx)(k.a,{onClick:function(e){return t.updateRow(t.uuid,{symbol:i,date:b,amount:O,price:w}),void I()}}):Object(M.jsx)(C.a,{onClick:function(t){I()}})}),Object(M.jsx)(d.a,{style:{minWidth:80,textDecoration:z},children:r?Object(M.jsx)(D.a,{value:i,onChange:function(t){return u(t.target.value)},variant:"outlined",inputProps:{style:{minWidth:"60"}}}):t.data.symbol}),Object(M.jsx)(d.a,{children:r?Object(M.jsx)("div",{style:{minWidth:140},children:Object(M.jsx)(R,{value:t.data.date,onChange:function(t){return f(t)}})}):E.toLocaleDateString()+" "+E.toLocaleTimeString()}),Object(M.jsx)(d.a,{style:{color:N},children:r?Object(M.jsx)(D.a,{type:"number",value:O,onChange:function(t){var e=parseFloat(t.target.value);e&&v(e)},inputProps:{style:{color:N}},style:{minWidth:100},variant:"outlined"}):t.data.amount}),Object(M.jsx)(d.a,{style:{color:N},children:r?Object(M.jsx)(D.a,{type:"number",value:w,onChange:function(t){var e=parseFloat(t.target.value);e&&A(e)},inputProps:{style:{color:N}},style:{minWidth:100},variant:"outlined"}):"$"+P.format(t.data.price)}),Object(M.jsx)(d.a,{style:{color:N},children:r?"$"+P.format(F(w*O,2)):"$"+P.format(F(t.data.price*t.data.amount,2))}),Object(M.jsx)(d.a,{onClick:function(){return t.deleteRow(t.uuid)},children:Object(M.jsx)(S.a,{})})]})}function I(t){return Object(M.jsxs)("div",{children:[Object(M.jsxs)(j.a,{component:f.a,children:[Object(M.jsx)("div",{style:{textAlign:"center"},children:Object(M.jsxs)("h3",{children:[t.title," ",Object(M.jsx)(O.a,{onClick:function(){t.addRow()}})]})}),Object(M.jsx)("div",{style:{maxHeight:400,overflowX:"auto"},children:Object(M.jsxs)(u.a,{stickyHeader:!0,children:[Object(M.jsx)(b.a,{children:Object(M.jsxs)(m.a,{children:[Object(M.jsx)(d.a,{}),Object(M.jsx)(d.a,{children:"Symbol "}),Object(M.jsx)(d.a,{children:"Date"}),Object(M.jsx)(d.a,{children:"Amount"}),Object(M.jsx)(d.a,{children:"Price"}),Object(M.jsx)(d.a,{children:"Total"}),Object(M.jsx)(d.a,{})]})}),Object(M.jsx)(l.a,{children:Object.entries(t.data).map((function(e){var a=e[0],n=e[1],r=0===t.dcaData[a];return Object(M.jsx)(z,{uuid:a,data:n,isUsed:r,updateRow:t.updateRow,deleteRow:t.deleteRow},a)}))})]})})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("input",{type:"file",accept:".csv",onChange:function(e){if(e.target.files){var a=e.target.files[0],n=new FileReader;n.onload=function(e){var a,n=null===(a=e.target)||void 0===a?void 0:a.result;if(n){for(var r=Object(v.parse)(n.toString()),c=[],o=1;o<r.data.length;o++){var s=x(r.data[o]);c.push(s)}t.onImportComplete(c)}},n.readAsBinaryString(a)}}}),Object(M.jsx)(p.a,{onClick:function(){var e=t.title,a="data:text/csv;charset=utf-8,"+function(t){var e=t.map((function(t){var e=[];return e.push(t.symbol),e.push(t.date.toString()),e.push(t.amount.toString()),e.push(t.price.toString()),e}));return e.unshift(["symbol","date","amount","price"]),e}(Object.values(t.data)).map((function(t){return t.join(",")})).join("\n"),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download",e+".csv"),n.click(),n.remove()},children:"Export"})]})]})}var W=a(180),$=a(25),B=a.n($),J=a(32),U=a(45),H=a(101),K=a(64),L=a(65),Y={apiKey:L.a,authDomain:L.b,databaseURL:L.c,storageBucket:L.d},Z=Object(H.a)(Y),G=Object(K.c)(Z);function X(){return q.apply(this,arguments)}function q(){return(q=Object(J.a)(B.a.mark((function t(){var e,a,n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},console.log("I am running"),t.prev=2,a=Object(K.d)(G),t.next=6,Object(K.b)(Object(K.a)(a,"cryptos"));case 6:(n=t.sent).exists()?(e=n.val(),console.log(n.val())):console.log("No data available"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error(t.t0);case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}var Q=Object(U.b)("currentPrices/getCryptosPrices",Object(J.a)(B.a.mark((function t(){var e;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),V=Object(U.c)({name:"currentPrices",initialState:{},reducers:{},extraReducers:function(t){t.addCase(Q.fulfilled,(function(t,e){console.log(e.payload),Object.entries(e.payload).forEach((function(e){var a=e[0],n=e[1];t[a]=n}))}))}}),_=function(t){return t.currentPrices},tt=V.reducer,et=a(73),at=a(86);var nt=Object(U.c)({name:"transactionsData",initialState:{transactions:{},summaryData:{dollarCostAveragesTransactions:{},dollarCostAveragesSummary:{},dollarCostAveragesProfitsSummary:{profits:{},notSoldAmount:{}}}},reducers:{addTransaction:function(t,e){var a=Object(at.uuid)();if(e.payload)t.transactions[a]=e.payload;else{var n={symbol:"",date:Date.now(),amount:0,price:0};t.transactions[a]=n}},bulkAddTransactions:function(t,e){e.payload.forEach((function(e){var a=Object(at.uuid)();t.transactions[a]=e}))},deleteAllTransactions:function(t){t.transactions={}},updateTransaction:function(t,e){var a=t.transactions[e.payload.id],n=e.payload.transaction;void 0!==n.amount&&(a.amount=n.amount),void 0!==n.date&&(a.date=n.date),void 0!==n.price&&(a.price=n.price),void 0!==n.symbol&&(a.symbol=n.symbol)},removeTransaction:function(t,e){delete t.transactions[e.payload.id]},updateDollarCostAverageTransactions:function(t,e){t.summaryData.dollarCostAveragesTransactions=e.payload},updateDollarCostAverageSummary:function(t,e){t.summaryData.dollarCostAveragesSummary=e.payload},updateDollarCostAverageProfitSummary:function(t,e){t.summaryData.dollarCostAveragesProfitsSummary=e.payload}}}),rt=nt.actions,ct=rt.addTransaction,ot=rt.bulkAddTransactions,st=rt.deleteAllTransactions,it=rt.updateTransaction,ut=rt.removeTransaction,lt=rt.updateDollarCostAverageTransactions,dt=rt.updateDollarCostAverageSummary,jt=rt.updateDollarCostAverageProfitSummary,bt=function(t){return t.transactionsData.transactions},mt=function(t){return t.transactionsData.summaryData.dollarCostAveragesSummary},ft=function(t){return t.transactionsData.summaryData.dollarCostAveragesProfitsSummary},pt=Object(et.a)([bt],(function(t){var e=Object.entries(t).map((function(t){return{id:t[0],amount:t[1].amount,date:t[1].date,price:t[1].price,symbol:t[1].symbol}}));e.sort((function(t,e){return t.date-e.date}));var a={},n=new Map;return e.forEach((function(t){if(function(t){return t.amount>0}(t))a[t.id]={result:{amount:t.amount,date:t.date,price:t.price,symbol:t.symbol},sells:{}};else{var e=n.get(t.symbol);e||(e=[]),e.push(t),n.set(t.symbol,e)}})),Object.values(a).forEach((function(t){for(var e=t.result,a=e.symbol,r=n.get(a);r&&0!==r.length&&0!==e.amount;){var c=r.pop();if(c){var o=0;-1*c.amount<=e.amount?(o=c.amount,e.amount+=c.amount,c.amount=0):(o=-1*e.amount,c.amount+=e.amount,e.amount=0,r.push(c)),t.sells[c.id]={amount:o,date:c.date,price:c.price,symbol:c.symbol}}}})),a})),ht=Object(et.a)([pt],(function(t){var e={};return Object.entries(t).forEach((function(t){var a=t[0];e[a]=t[1].result.amount,Object.entries(t[1].sells).forEach((function(t){var a=t[0];e[a]=t[1].amount}))})),e})),Ot=nt.reducer;function vt(){var t=i(mt),e=i(ft),a=i(_),n=Object.keys(t).filter((function(t){return a[t]})).map((function(t){return{symbol:t,price:a[t]}}));return Object(M.jsxs)("div",{children:[Object(M.jsx)("h3",{children:"Wallet"}),Object(M.jsx)("table",{children:Object(M.jsx)("tbody",{children:Object.entries(e.notSoldAmount).map((function(t){var e=t[0],a=t[1];return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:e}),Object(M.jsx)("td",{children:a.toFixed(2)})]},"wallet-"+e)}))})},"wallet"),Object(M.jsxs)(W.a,{container:!0,spacing:3,children:[Object(M.jsxs)(W.a,{item:!0,xs:12,sm:6,children:[Object(M.jsx)("h3",{children:"Dollar Cost Averages"}),Object(M.jsx)("table",{children:Object(M.jsx)("tbody",{children:Object.entries(t).map((function(t){var e=t[0],a=t[1];return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:e}),Object(M.jsxs)("td",{children:["$",N(a.price,2)]})]},"dca-summary-"+e)}))})},"dca-summary")]}),Object(M.jsxs)(W.a,{item:!0,xs:12,sm:6,children:[Object(M.jsx)("h3",{children:"Current Prices"}),Object(M.jsx)("table",{children:Object(M.jsx)("tbody",{children:n.map((function(t){return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:t.symbol}),Object(M.jsxs)("td",{children:["$",N(t.price,2)]})]},"current-prices-"+t.symbol)}))})},"current-prices")]}),Object(M.jsxs)(W.a,{item:!0,xs:12,sm:6,children:[Object(M.jsx)("h3",{children:"Unrealized Profits"}),Object(M.jsx)("table",{children:Object(M.jsx)("tbody",{children:Object.entries(e.notSoldAmount).map((function(e){var n=e[0],r=e[1],c=t[n].price*r,o=a[n]*r-c;return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:n}),Object(M.jsxs)("td",{children:["$",o.toFixed(2)]})]},"dca-unrealized-profits-"+n)}))})},"dca-unrealized-profits")]}),Object(M.jsxs)(W.a,{item:!0,xs:12,sm:6,children:[Object(M.jsx)("h3",{children:"Profits"}),Object(M.jsx)("table",{children:Object(M.jsxs)("tbody",{children:[Object.entries(e.profits).map((function(t){var e=t[0],a=t[1];return Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:e}),Object(M.jsxs)("td",{children:["$",a.toFixed(2)]})]},"dca-profits-"+e)})),Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"Total"}),Object(M.jsxs)("td",{children:["$",Object.values(e.profits).reduce((function(t,e){return t+e}),0).toFixed(2)]})]},"dca-profits-sum")]})},"dca-profits")]})]})]})}function xt(t,e,a){var n=t.get(e);n||(n=0),n+=a,t.set(e,n)}function yt(t,e){var a=new Map,n=new Map,r=new Map;Object.keys(t).forEach((function(c){var o=t[c],s=o.result.symbol,i=Object.keys(o.sells),u=o.result.amount,l=e[c].amount-u;0!==u&&xt(r,s,u),xt(a,s,l*e[c].price),i.forEach((function(t){var e=o.sells[t],a=-1*e.amount*e.price;xt(n,s,a)}))}));var c=new Map;a.forEach((function(t,e){return xt(c,e,-1*t)})),n.forEach((function(t,e){return xt(c,e,t)}));var o={profits:{},notSoldAmount:{}};return c.forEach((function(t,e){return o.profits[e]=t})),r.forEach((function(t,e){return o.notSoldAmount[e]=t})),o}var gt=function(){var t=Object(s.b)(),e=i(bt),a=i(pt),r=i(ht);return Object(n.useEffect)((function(){t(Q())}),[t]),Object(n.useEffect)((function(){var n=function(t){var e=new Map,a=new Map;Object.keys(t).forEach((function(n){var r=t[n];if(0!==r.result.amount){var c=r.result.symbol;xt(e,c,r.result.amount),xt(a,c,r.result.amount*r.result.price)}}));var n={};return e.forEach((function(t,e){var r=a.get(e);if(r){var c=r/t;n[e]={symbol:e,price:c}}})),n}(a),r=yt(a,e);yt(a,e),t(lt(a)),t(dt(n)),t(jt(r))}),[t,e,a]),Object(M.jsxs)("div",{children:[Object(M.jsx)(vt,{}),Object(M.jsx)(I,{title:"Cryptos",data:e,dcaData:r,addRow:function(e){t(ct(e||null))},updateRow:function(e,a){t(it({id:e,transaction:a}))},deleteRow:function(e){t(ut({id:e}))},onImportComplete:function(e){t(st()),t(ot(e))}}),Object(M.jsx)("div",{style:{height:100}})]})},St=Object(U.a)({reducer:{transactionsData:Ot,currentPrices:tt}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(s.a,{store:St,children:Object(M.jsx)(gt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},65:function(t){t.exports=JSON.parse('{"a":"AIzaSyBZGThYE4vJkZfhlIHnj3WHoDknJOiKzKA","b":"stocks-analyzer-9cd73.firebaseapp.com","c":"https://stocks-analyzer-9cd73-default-rtdb.firebaseio.com","d":"stocks-analyzer-9cd73.appspot.com"}')}},[[138,1,2]]]);
//# sourceMappingURL=main.a2b78a24.chunk.js.map