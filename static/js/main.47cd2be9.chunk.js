(this["webpackJsonpstocks-analyzer"]=this["webpackJsonpstocks-analyzer"]||[]).push([[0],{157:function(t,e,a){},191:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),s=(a(157),a(76)),i=s.c,u=a(224),l=a(226),d=a(222),j=a(223),b=a(225),m=a(221),f=a(218),h=a(219),v=a(120);function O(t){var e=t[0],a=parseInt(t[1]),n=parseFloat(t[2]),r=parseFloat(t[3]);return{symbol:e,date:isNaN(a)?-1:a,amount:isNaN(n)?-1:n,price:isNaN(r)?-1:r}}var p=a(25),x=a(126),y=a.n(x),g=a(124),S=a.n(g),w=a(125),A=a.n(w),C=a(228);var D=a(24),k=a(227),E=a(130),T=a(5);function P(t){return Object(T.jsx)(D.a,{utils:E.a,children:Object(T.jsx)(k.a,{margin:"normal",format:"MM/dd/yyyy",value:function(t){var e=new Date(t);return function(t){var e=t+1;return e<10?"0"+e.toString():e.toString()}(e.getMonth())+"/"+function(t){return t<10?"0"+t.toString():t.toString()}(e.getDate())+"/"+e.getFullYear().toString()}(t.value),onChange:function(e){e&&t.onChange(e.getTime())},variant:"dialog",KeyboardButtonProps:{"aria-label":"change date"}})})}var R=a(18);function M(t,e){return Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function N(t){return 0===t?"-":t>-1&&t<1?"$"+function(t,e){var a,n=t.toString(),r="",o=0,c=Object(R.a)(n);try{for(c.s();!(a=c.n()).done;){var s=a.value;o<e&&("."===s||0===o&&"0"===s?r=r.concat(s):(r=r.concat(s),o++))}}catch(i){c.e(i)}finally{c.f()}return r}(t,4):"$"+t.toFixed(2)}function F(t){var e=Object(n.useState)(!1),a=Object(p.a)(e,2),r=a[0],o=a[1],c=Object(n.useState)(t.data.symbol),s=Object(p.a)(c,2),i=s[0],u=s[1],l=Object(n.useState)(t.data.date),j=Object(p.a)(l,2),b=j[0],f=j[1],h=Object(n.useState)(t.data.amount),v=Object(p.a)(h,2),O=v[0],x=v[1],g=Object(n.useState)(t.data.price),w=Object(p.a)(g,2),D=w[0],k=w[1],E=new Date(t.data.date),R=new Intl.NumberFormat("en-US"),N=0===t.data.amount?"neither":t.data.amount>0?"buy":"sell",F="buy"===N?"red":"sell"===N?"green":"black",z=t.isUsed?"line-through":"none";function I(){o(!r)}return Object(T.jsxs)(m.a,{children:[Object(T.jsx)(d.a,{children:r?Object(T.jsx)(A.a,{onClick:function(e){return t.updateRow(t.uuid,{symbol:i,date:b,amount:O,price:D}),void I()}}):Object(T.jsx)(S.a,{onClick:function(t){I()}})}),Object(T.jsx)(d.a,{style:{minWidth:80,textDecoration:z},children:r?Object(T.jsx)(C.a,{value:i,onChange:function(t){return u(t.target.value)},variant:"outlined",inputProps:{style:{minWidth:"60"}}}):t.data.symbol}),Object(T.jsx)(d.a,{children:r?Object(T.jsx)("div",{style:{minWidth:140},children:Object(T.jsx)(P,{value:t.data.date,onChange:function(t){return f(t)}})}):E.toLocaleDateString()+" "+E.toLocaleTimeString()}),Object(T.jsx)(d.a,{style:{color:F},children:r?Object(T.jsx)(C.a,{type:"number",value:O,onChange:function(t){var e=parseFloat(t.target.value);e&&x(e)},inputProps:{style:{color:F}},style:{minWidth:100},variant:"outlined"}):t.data.amount}),Object(T.jsx)(d.a,{style:{color:F},children:r?Object(T.jsx)(C.a,{type:"number",value:D,onChange:function(t){var e=parseFloat(t.target.value);e&&k(e)},inputProps:{style:{color:F}},style:{minWidth:100},variant:"outlined"}):"$"+R.format(t.data.price)}),Object(T.jsx)(d.a,{style:{color:F},children:r?"$"+R.format(M(D*O,2)):"$"+R.format(M(t.data.price*t.data.amount,2))}),Object(T.jsx)(d.a,{onClick:function(){return t.deleteRow(t.uuid)},children:Object(T.jsx)(y.a,{})})]})}var z=a(46),I=a.n(z),W=a(128),B=a.n(W),$=a(127),J=a.n($);function U(t){return Object(T.jsx)("div",{children:Object(T.jsxs)(I.a,{container:!0,spacing:3,children:[Object(T.jsx)(I.a,{item:!0,xs:12,sm:1}),Object(T.jsx)(I.a,{item:!0,xs:12,sm:3,children:Object(T.jsx)("h2",{children:t.title})}),Object(T.jsx)(I.a,{item:!0,xs:12,sm:3}),Object(T.jsx)(I.a,{item:!0,xs:12,sm:4,children:Object(T.jsxs)("h2",{children:[Object(T.jsx)(J.a,{}),Object(T.jsx)(C.a,{disabled:!0})]})}),Object(T.jsx)(I.a,{item:!0,xs:12,sm:1,children:Object(T.jsx)("h2",{children:Object(T.jsx)(B.a,{onClick:function(){t.addRow()}})})}),Object(T.jsx)(I.a,{item:!0,xs:12,sm:1})]})})}function H(t){return Object(T.jsxs)("div",{children:[Object(T.jsxs)(j.a,{component:f.a,children:[Object(T.jsx)(U,{title:t.title,addRow:t.addRow}),Object(T.jsx)("div",{style:{maxHeight:400,overflowX:"auto"},children:Object(T.jsxs)(u.a,{stickyHeader:!0,children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(m.a,{children:[Object(T.jsx)(d.a,{}),Object(T.jsx)(d.a,{children:"Symbol "}),Object(T.jsx)(d.a,{children:"Date"}),Object(T.jsx)(d.a,{children:"Amount"}),Object(T.jsx)(d.a,{children:"Price"}),Object(T.jsx)(d.a,{children:"Total"}),Object(T.jsx)(d.a,{})]})}),Object(T.jsx)(l.a,{children:Object.entries(t.data).map((function(e){var a=e[0],n=e[1],r=0===t.dcaData[a];return Object(T.jsx)(F,{uuid:a,data:n,isUsed:r,updateRow:t.updateRow,deleteRow:t.deleteRow},a)}))})]})})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("input",{type:"file",accept:".csv",onChange:function(e){if(e.target.files){var a=e.target.files[0],n=new FileReader;n.onload=function(e){var a,n=null===(a=e.target)||void 0===a?void 0:a.result;if(n){for(var r=Object(v.parse)(n.toString()),o=[],c=1;c<r.data.length;c++){var s=O(r.data[c]);o.push(s)}t.onImportComplete(o)}},n.readAsBinaryString(a)}}}),Object(T.jsx)(h.a,{onClick:function(){var e=t.title,a="data:text/csv;charset=utf-8,"+function(t){var e=t.map((function(t){var e=[];return e.push(t.symbol),e.push(t.date.toString()),e.push(t.amount.toString()),e.push(t.price.toString()),e}));return e.unshift(["symbol","date","amount","price"]),e}(Object.values(t.data)).map((function(t){return t.join(",")})).join("\n"),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download",e+".csv"),n.click(),n.remove()},children:"Export"})]})]})}var K=a(67),L=Object(K.b)({name:"currentPrices",initialState:{},reducers:{updateCurrentPrices:function(t,e){Object.entries(e.payload).forEach((function(e){var a=e[0],n=e[1];t[a]=n}))}}}),Y=function(t){return t.currentPrices},Z=L.actions.updateCurrentPrices,G=L.reducer,V=a(87),X=a(106);var q=Object(K.b)({name:"transactionsData",initialState:{transactions:{},summaryData:{dollarCostAveragesTransactions:{},dollarCostAveragesSummary:{},dollarCostAveragesProfitsSummary:{profits:{},notSoldAmount:{}}}},reducers:{addTransaction:function(t,e){var a=Object(X.uuid)();if(e.payload)t.transactions[a]=e.payload;else{var n={symbol:"",date:Date.now(),amount:0,price:0};t.transactions[a]=n}},bulkAddTransactions:function(t,e){e.payload.forEach((function(e){var a=Object(X.uuid)();t.transactions[a]=e}))},deleteAllTransactions:function(t){t.transactions={}},updateTransaction:function(t,e){var a=t.transactions[e.payload.id],n=e.payload.transaction;void 0!==n.amount&&(a.amount=n.amount),void 0!==n.date&&(a.date=n.date),void 0!==n.price&&(a.price=n.price),void 0!==n.symbol&&(a.symbol=n.symbol)},removeTransaction:function(t,e){delete t.transactions[e.payload.id]},updateDollarCostAverageTransactions:function(t,e){t.summaryData.dollarCostAveragesTransactions=e.payload},updateDollarCostAverageSummary:function(t,e){t.summaryData.dollarCostAveragesSummary=e.payload},updateDollarCostAverageProfitSummary:function(t,e){t.summaryData.dollarCostAveragesProfitsSummary=e.payload}}}),Q=q.actions,_=Q.addTransaction,tt=Q.bulkAddTransactions,et=Q.deleteAllTransactions,at=Q.updateTransaction,nt=Q.removeTransaction,rt=Q.updateDollarCostAverageTransactions,ot=Q.updateDollarCostAverageSummary,ct=Q.updateDollarCostAverageProfitSummary,st=function(t){return t.transactionsData.transactions},it=function(t){return t.transactionsData.summaryData.dollarCostAveragesSummary},ut=function(t){return t.transactionsData.summaryData.dollarCostAveragesProfitsSummary},lt=Object(V.a)([st],(function(t){var e=Object.entries(t).map((function(t){return{id:t[0],amount:t[1].amount,date:t[1].date,price:t[1].price,symbol:t[1].symbol}}));e.sort((function(t,e){return t.date-e.date}));var a={},n=new Map;return e.forEach((function(t){if(function(t){return t.amount>0}(t))a[t.id]={result:{amount:t.amount,date:t.date,price:t.price,symbol:t.symbol},sells:{}};else{var e=n.get(t.symbol);e||(e=[]),e.push(t),n.set(t.symbol,e)}})),Object.values(a).forEach((function(t){for(var e=t.result,a=e.symbol,r=n.get(a);r&&0!==r.length&&0!==e.amount;){var o=r.pop();if(o){var c=0;-1*o.amount<=e.amount?(c=o.amount,e.amount+=o.amount,o.amount=0):(c=-1*e.amount,o.amount+=e.amount,e.amount=0,r.push(o)),t.sells[o.id]={amount:c,date:o.date,price:o.price,symbol:o.symbol}}}})),a})),dt=Object(V.a)([lt],(function(t){var e={};return Object.entries(t).forEach((function(t){var a=t[0];e[a]=t[1].result.amount,Object.entries(t[1].sells).forEach((function(t){var a=t[0];e[a]=t[1].amount}))})),e})),jt=q.reducer;function bt(t){var e;return Object(T.jsx)("td",{style:{textAlign:"right",color:(e=t.value,e<0?"red":e>0?"green":"black")},children:0===t.value?"-":t.formatter(t.value)})}function mt(){var t=i(it),e=i(ut),a=i(Y),n=0,r=0,o=0,c=Object.entries(e.profits).map((function(c){var s=c[0],i=c[1],u=e.notSoldAmount[s]?e.notSoldAmount[s]:0,l=a[s],d=l&&u?l*u:0,j=t[s]?t[s].price:0,b=l*u-j*u;return n+=d,r+=b,o+=i,Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:s}),Object(T.jsx)(bt,{value:d,formatter:N}),Object(T.jsx)(bt,{value:u,formatter:function(t){return t.toFixed(2)}}),Object(T.jsx)(bt,{value:l,formatter:N}),Object(T.jsx)(bt,{value:j,formatter:N}),Object(T.jsx)(bt,{value:l&&j?(l-j)/j*100:0,formatter:function(t){return t.toFixed(2)+"%"}}),Object(T.jsx)(bt,{value:b,formatter:N}),Object(T.jsx)(bt,{value:i,formatter:N})]},"dashboard-"+s)}));return Object(T.jsxs)("div",{children:[Object(T.jsx)("h1",{style:{textAlign:"center"},children:"Dashboard"}),Object(T.jsxs)("table",{children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Symbol"}),Object(T.jsx)("th",{children:"Current Value"}),Object(T.jsx)("th",{children:"Amount"}),Object(T.jsx)("th",{children:"Current Price"}),Object(T.jsx)("th",{children:"Dollar Cost Average"}),Object(T.jsx)("th",{children:"% Return"}),Object(T.jsx)("th",{children:"Unrealized Profits"}),Object(T.jsx)("th",{children:"All Time Profits"})]})}),c,Object(T.jsx)("tfoot",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"Total"}),Object(T.jsx)(bt,{value:n,formatter:N}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{}),Object(T.jsx)(bt,{value:r,formatter:N}),Object(T.jsx)(bt,{value:o,formatter:N})]})})]})]})}function ft(t,e,a){var n=t.get(e);n||(n=0),n+=a,t.set(e,n)}function ht(t,e){var a=new Map,n=new Map,r=new Map;Object.keys(t).forEach((function(o){var c=t[o],s=c.result.symbol,i=Object.keys(c.sells),u=c.result.amount,l=e[o].amount-u;0!==u&&ft(r,s,u),ft(a,s,l*e[o].price),i.forEach((function(t){var e=c.sells[t],a=-1*e.amount*e.price;ft(n,s,a)}))}));var o=new Map;a.forEach((function(t,e){return ft(o,e,-1*t)})),n.forEach((function(t,e){return ft(o,e,t)}));var c={profits:{},notSoldAmount:{}};return o.forEach((function(t,e){return c.profits[e]=t})),r.forEach((function(t,e){return c.notSoldAmount[e]=t})),c}var vt=a(74),Ot=a(129),pt=a(78),xt={apiKey:pt.a,authDomain:pt.b,databaseURL:pt.c,storageBucket:pt.d},yt=Object(Ot.a)(xt),gt=Object(vt.a)(yt);var St=function(){var t=Object(s.b)(),e=i(st),a=i(lt),r=i(dt);return Object(n.useEffect)((function(){var e=Object(vt.c)(gt),a=Object(vt.b)(e,(function(e){if(e.exists()){var a=e.val().cryptos;console.log(a),t(Z(a))}else console.log("No data available")}));return function(){a()}}),[t]),Object(n.useEffect)((function(){var n=function(t){var e=new Map,a=new Map;Object.keys(t).forEach((function(n){var r=t[n];if(0!==r.result.amount){var o=r.result.symbol;ft(e,o,r.result.amount),ft(a,o,r.result.amount*r.result.price)}}));var n={};return e.forEach((function(t,e){var r=a.get(e);if(r){var o=r/t;n[e]={symbol:e,price:o}}})),n}(a),r=ht(a,e);ht(a,e),t(rt(a)),t(ot(n)),t(ct(r))}),[t,e,a]),Object(T.jsxs)("div",{children:[Object(T.jsx)(mt,{}),Object(T.jsx)(H,{title:"Cryptos",data:e,dcaData:r,addRow:function(e){t(_(e||null))},updateRow:function(e,a){t(at({id:e,transaction:a}))},deleteRow:function(e){t(nt({id:e}))},onImportComplete:function(e){t(et()),t(tt(e))}}),Object(T.jsx)("div",{style:{height:100}})]})},wt=Object(K.a)({reducer:{transactionsData:jt,currentPrices:G}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(s.a,{store:wt,children:Object(T.jsx)(St,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},78:function(t){t.exports=JSON.parse('{"a":"AIzaSyBZGThYE4vJkZfhlIHnj3WHoDknJOiKzKA","b":"stocks-analyzer-9cd73.firebaseapp.com","c":"https://stocks-analyzer-9cd73-default-rtdb.firebaseio.com","d":"stocks-analyzer-9cd73.appspot.com"}')}},[[191,1,2]]]);
//# sourceMappingURL=main.47cd2be9.chunk.js.map