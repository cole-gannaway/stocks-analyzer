{"version":3,"sources":["app/hooks.ts","utilities/csv-utils.ts","components/DatePickerWrapper.tsx","utilities/date-utils.ts","utilities/number-utils.ts","components/DataRow.tsx","components/DataTable.tsx","firebase/firebase.ts","slices/currentPricesSlice.ts","slices/transactionsSlice.ts","model/ITransaction.ts","components/DollarCostAverages.tsx","utilities/transaction-utils.ts","App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["useAppSelector","useSelector","convertCSVRowIntoTransactionRow","csvRow","symbol","date","parseInt","amount","parseFloat","price","isNaN","DatePickerWrapper","props","utils","DateFnsUtils","margin","format","value","ms","Date","month","actualMonth","toString","getMonthInMMFormat","getMonth","getDateinDDFormat","getDate","getFullYear","convertDateMsToString","onChange","getTime","variant","KeyboardButtonProps","roundDecimalPlaces","val","decimalPlaces","Math","round","Number","EPSILON","pow","toFixedUnlessZero","fractionDigits","toFixed","DataRow","useState","isEditing","setIsEditing","data","setSymbol","setDate","setAmount","setPrice","dateTime","commaFormatter","Intl","NumberFormat","buySell","textColor","strikeThrough","isUsed","toggleIsEditing","TableRow","TableCell","onClick","e","updateRow","uuid","style","minWidth","textDecoration","TextField","target","inputProps","toLocaleDateString","toLocaleTimeString","color","type","deleteRow","DataTable","TableContainer","component","Paper","textAlign","title","addRow","maxHeight","overflowX","Table","stickyHeader","TableHead","TableBody","Object","entries","map","entry","row","dcaData","accept","files","file","reader","FileReader","onload","evt","bstr","result","rows","parse","dataRows","i","length","dataRow","push","onImportComplete","readAsBinaryString","Button","filename","csvContent","csvRows","unshift","convertTransactionRowIntoCSVRows","values","join","link","document","createElement","setAttribute","click","remove","firebaseConfig","apiKey","firebaseWebConfig","authDomain","databaseURL","storageBucket","app","initializeApp","database","getDatabase","getCryptosPrices","a","retVal","console","log","dbRef","ref","get","child","snapshot","exists","error","fetchCurrentCryptoPrices","createAsyncThunk","currentPrices","currentPricesSlice","createSlice","name","initialState","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","forEach","key","selectCurrentPrices","transactionsSlice","transactions","summaryData","dollarCostAveragesTransactions","dollarCostAveragesSummary","dollarCostAveragesProfitsSummary","profits","notSoldAmount","addTransaction","id","defaultITransaction","now","bulkAddTransactions","transaction","deleteAllTransactions","updateTransaction","orig","update","undefined","removeTransaction","updateDollarCostAverageTransactions","updateDollarCostAverageSummary","updateDollarCostAverageProfitSummary","actions","selectTransactions","transactionsData","selectDCASummaries","selectDCAProfitSummary","selectDCATransactionsMemoized","createSelector","sort","b","dcaTransactions","sellsMap","Map","isBuy","sells","sellsListForSymbol","set","dcaTransaction","buy","sell","pop","amountApplied","selectDCATransactionsAmountRemaining","transactionsAmountLeft","buyUUID","sellEntry","sellUUID","DollarCostAverages","dcaSummaries","dcaProfitSummary","symbolsAndPrices","keys","filter","Grid","container","spacing","item","xs","sm","summary","totalCost","unrealizedProfits","reduce","prev","curr","addToSumMap","sum","summarizeProfitsFromDollarCostAverageTransactions","symbolToSpendingsSumMap","symbolToEarningsSumMap","symbolToAmountNotSoldMap","buyId","sellIds","amountNotSold","amountSold","sellId","returns","symbolToProfitsSumMap","profitSummary","App","dispatch","useDispatch","dcaTransactionsRemaining","useEffect","dcaSummary","symbolToAmountsSumMap","symbolToWeightedSumMap","amountSum","weightedSum","dcaPrice","summarizeDollarCostAverageTransactions","height","store","configureStore","reducer","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.a2b78a24.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { ITransaction } from '../model/ITransaction';\n\nexport function createCSV(rows: string[][]) {\n  let csvContent =\n    'data:text/csv;charset=utf-8,' + rows.map((e) => e.join(',')).join('\\n');\n  return csvContent;\n}\n\nexport function convertTransactionRowIntoCSVRows(dataRows: ITransaction[]) {\n  const csvRows = dataRows.map((dataRow) => {\n    const row: string[] = [];\n    row.push(dataRow.symbol);\n    row.push(dataRow.date.toString());\n    row.push(dataRow.amount.toString());\n    row.push(dataRow.price.toString());\n    return row;\n  });\n  const headerRow = ['symbol', 'date', 'amount', 'price'];\n  csvRows.unshift(headerRow);\n  return csvRows;\n}\n\nexport function convertCSVRowIntoTransactionRow(csvRow: string[]) {\n  const symbol = csvRow[0];\n  const date: number = parseInt(csvRow[1]);\n  const amount: number = parseFloat(csvRow[2]);\n  const price:number = parseFloat(csvRow[3]);\n  const result: ITransaction = {\n    symbol: symbol,\n    date: !isNaN(date) ? date : -1,\n    amount: !isNaN(amount) ? amount : -1,\n    price: !isNaN(price) ? price : -1,\n  };\n  return result;\n}\n","import { getDateinDDFormat, getMonthInMMFormat } from '../utilities/date-utils'\n\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\nexport interface DatePickerWrapperProps {\n    value: number;\n    onChange: (date: number) => void;\n}\n\nexport function DatePickerWrapper(props: DatePickerWrapperProps) {\n    function convertDateMsToString(ms: number) {\n        const date = new Date(ms);\n        const MM = getMonthInMMFormat(date.getMonth());\n        const dd = getDateinDDFormat(date.getDate())\n        const retVal = MM + \"/\" + dd + \"/\" + date.getFullYear().toString();\n        return retVal;\n    }\n\n    function handleChange(date: MaterialUiPickersDate) {\n        if (date) {\n            props.onChange(date.getTime());\n        }\n    }\n\n    return <MuiPickersUtilsProvider utils={DateFnsUtils}>\n        <KeyboardDatePicker\n            margin=\"normal\"\n            format=\"MM/dd/yyyy\"\n            value={convertDateMsToString(props.value)}\n            onChange={handleChange}\n            variant=\"dialog\"\n            KeyboardButtonProps={{\n                'aria-label': 'change date',\n            }}\n        />\n    </MuiPickersUtilsProvider>\n}","export const MILLIS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;\n\nexport function getMonthInMMFormat(month: number) {\n  const actualMonth = month + 1;\n  if (actualMonth < 10) {\n    return '0' + actualMonth.toString();\n  } else {\n    return actualMonth.toString();\n  }\n}\nexport function getDateinDDFormat(date: number) {\n  if (date < 10) {\n    return '0' + date.toString();\n  } else {\n    return date.toString();\n  }\n}\nexport function compareDates(a: Date, b: Date) {\n  let compare = a.getFullYear() - b.getFullYear();\n  if (compare === 0) {\n    compare = a.getMonth() - b.getMonth();\n  }\n  if (compare === 0) {\n    compare = a.getDate() - b.getDate();\n  }\n  return compare;\n}\n","export function formatWithCommas(formatter: Intl.NumberFormat, val: number) {\n  formatter.format(val);\n}\n\nexport function roundDecimalPlaces(val: number, decimalPlaces: number) {\n  return (\n    Math.round((val + Number.EPSILON) * Math.pow(10, decimalPlaces)) /\n    Math.pow(10, decimalPlaces)\n  );\n}\n\nexport function toFixedUnlessZero(val: number, fractionDigits: number) {\n  const toFixed = val.toFixed(fractionDigits);\n  if (toFixed !== '0.00') return toFixed;\n  else return val.toString();\n}\n","import { useState } from 'react';\n\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { TextField } from '@material-ui/core';\n\nimport { DatePickerWrapper } from './DatePickerWrapper';\nimport { ITransaction } from '../model/ITransaction';\nimport { roundDecimalPlaces } from '../utilities/number-utils';\n\nexport interface IDataRowProps {\n    uuid: string;\n    data: ITransaction;\n    isUsed: boolean;\n    updateRow: (id: string, row: Partial<ITransaction>) => void;\n    deleteRow: (id: string) => void;\n}\nexport function DataRow(props: IDataRowProps) {\n    const [isEditing, setIsEditing] = useState(false);\n\n    // variables for editing\n    const [symbol, setSymbol] = useState(props.data.symbol);\n    const [date, setDate] = useState(props.data.date);\n    const [amount, setAmount] = useState(props.data.amount);\n    const [price, setPrice] = useState(props.data.price);\n\n    const dateTime = new Date(props.data.date);\n    const commaFormatter = new Intl.NumberFormat('en-US');\n\n    // styles\n    const buySell = props.data.amount === 0 ? \"neither\" : props.data.amount > 0 ? \"buy\" : \"sell\";\n    const textColor = buySell === \"buy\" ? \"red\" : buySell === \"sell\" ? \"green\" : \"black\";\n    const strikeThrough = props.isUsed ? \"line-through\" : \"none\";\n\n    function toggleIsEditing() {\n        setIsEditing(!isEditing);\n    }\n    function onSave() {\n        props.updateRow(props.uuid, {\n            symbol: symbol,\n            date: date,\n            amount: amount,\n            price: price,\n        })\n        toggleIsEditing();\n    }\n\n    return <TableRow>\n        <TableCell >\n            {!isEditing ?\n                <EditIcon onClick={(e) => { toggleIsEditing() }} /> :\n                <SaveIcon onClick={(e) => onSave()} />\n            }\n        </TableCell>\n        <TableCell style={{ minWidth: 80, textDecoration: strikeThrough }}>\n            {!isEditing ?\n                props.data.symbol :\n                <TextField value={symbol} onChange={(e) => setSymbol(e.target.value)} variant=\"outlined\" inputProps={{ style: { minWidth: '60' } }}></TextField>\n            }\n        </TableCell>\n        <TableCell >\n            {!isEditing ?\n                dateTime.toLocaleDateString() + \" \" + dateTime.toLocaleTimeString() :\n                <div style={{ minWidth: 140 }}><DatePickerWrapper value={props.data.date} onChange={(date: number) => setDate(date)} ></DatePickerWrapper></div>\n            }\n        </TableCell>\n        <TableCell style={{ color: textColor }}>\n            {!isEditing ?\n                props.data.amount :\n                <TextField type=\"number\" value={amount}\n                    onChange={(e) => {\n                        const amount = parseFloat(e.target.value);\n                        if (amount) setAmount(amount);\n                    }}\n                    inputProps={{ style: { color: textColor } }}\n                    style={{ minWidth: 100 }}\n                    variant=\"outlined\"\n                ></TextField>\n            }\n        </TableCell>\n        <TableCell style={{ color: textColor }}>\n            {!isEditing ?\n                (\"$\" + commaFormatter.format(props.data.price)) :\n                <TextField type=\"number\" value={price}\n                    onChange={(e) => {\n                        const price = parseFloat(e.target.value);\n                        if (price) setPrice(price);\n                    }}\n                    inputProps={{ style: { color: textColor } }}\n                    style={{ minWidth: 100 }}\n                    variant=\"outlined\"\n                ></TextField>\n            }\n        </TableCell>\n        <TableCell style={{ color: textColor }}>\n            {!isEditing ?\n                (\"$\" + commaFormatter.format(roundDecimalPlaces(props.data.price * props.data.amount, 2))) :\n                (\"$\" + commaFormatter.format(roundDecimalPlaces(price * amount, 2)))\n            }\n        </TableCell>\n        <TableCell onClick={() => props.deleteRow(props.uuid)}><DeleteIcon /></TableCell>\n    </TableRow >\n}","import React from 'react';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\n\nimport { parse } from 'papaparse';\n\nimport { ITransaction } from '../model/ITransaction';\nimport { convertCSVRowIntoTransactionRow, convertTransactionRowIntoCSVRows, createCSV } from '../utilities/csv-utils'\nimport { DataRow } from './DataRow';\n\nexport interface ITableProps {\n    title: string;\n    data: { [id: string]: ITransaction; }\n    dcaData: { [id: string]: number };\n    addRow: (data?: ITransaction) => void;\n    updateRow: (id: string, row: Partial<ITransaction>) => void;\n    deleteRow: (id: string) => void;\n    onImportComplete: (data: ITransaction[]) => void;\n}\nexport function DataTable(props: ITableProps) {\n\n    function handleAddRow() {\n        props.addRow();\n    }\n    function handleImport(e: React.ChangeEvent<HTMLInputElement>) {\n        if (e.target.files) {\n            const file = e.target.files[0];\n            const reader = new FileReader();\n            reader.onload = (evt) => {\n                /* Parse data */\n                const bstr = evt.target?.result;\n                if (bstr) {\n                    const rows = parse(bstr.toString());\n                    const dataRows: ITransaction[] = []\n                    for (let i = 1; i < rows.data.length; i++) {\n                        const row = rows.data[i] as string[];\n                        const dataRow = convertCSVRowIntoTransactionRow(row);\n                        dataRows.push(dataRow);\n                    }\n                    props.onImportComplete(dataRows);\n                }\n            };\n            reader.readAsBinaryString(file);\n        }\n    }\n    function handleExport() {\n        const filename = props.title;\n        const csvRows = convertTransactionRowIntoCSVRows(Object.values(props.data));\n        const csvContent = createCSV(csvRows);\n        const link = document.createElement('a');\n        link.setAttribute('href', csvContent);\n        link.setAttribute('download', filename + \".csv\");\n        link.click();\n        link.remove();\n    }\n\n    return <div>\n        <TableContainer component={Paper} >\n            <div style={{ textAlign: 'center' }}>\n                <h3>{props.title} <AddCircleOutlineIcon onClick={handleAddRow} /></h3>\n            </div>\n            <div style={{ maxHeight: 400, overflowX: 'auto' }}>\n                <Table stickyHeader>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell></TableCell>\n                            <TableCell>Symbol </TableCell>\n                            <TableCell>Date</TableCell>\n                            <TableCell>Amount</TableCell>\n                            <TableCell>Price</TableCell>\n                            <TableCell>Total</TableCell>\n                            <TableCell></TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody >\n                        {Object.entries(props.data).map((entry) => {\n                            const uuid = entry[0];\n                            const row = entry[1];\n                            const amountRemaining = props.dcaData[uuid];\n                            const isUsed = amountRemaining === 0 ? true : false;\n                            return <DataRow key={uuid} uuid={uuid} data={row} isUsed={isUsed} updateRow={props.updateRow} deleteRow={props.deleteRow} />\n                        })}\n                    </TableBody>\n                </Table>\n            </div>\n        </TableContainer>\n        <div>\n            <input type=\"file\" accept=\".csv\" onChange={handleImport} />\n            <Button onClick={handleExport}>Export</Button>\n        </div>\n    </div>\n}\n\n","import { initializeApp } from 'firebase/app';\nimport { getDatabase, ref, child, get } from 'firebase/database';\nimport * as firebaseWebConfig from '../config/firebase.config.json';\n\nconst firebaseConfig = {\n  apiKey: firebaseWebConfig.apiKey,\n  authDomain: firebaseWebConfig.authDomain,\n  databaseURL: firebaseWebConfig.databaseURL,\n  storageBucket: firebaseWebConfig.storageBucket,\n};\n\nconst app = initializeApp(firebaseConfig);\n\n// Get a reference to the database service\nconst database = getDatabase(app);\n\nexport interface CryptoDictionary {\n  [symbol: string]: number;\n}\n\nexport async function getCryptosPrices(): Promise<CryptoDictionary> {\n  let retVal = {};\n  console.log('I am running');\n  try {\n    const dbRef = ref(database);\n    const snapshot = await get(child(dbRef, 'cryptos'));\n    if (snapshot.exists()) {\n      retVal = snapshot.val() as CryptoDictionary;\n      console.log(snapshot.val());\n    } else {\n      console.log('No data available');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n\n  return retVal;\n}\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { RootState } from '../app/store';\nimport { CryptoDictionary, getCryptosPrices } from '../firebase/firebase';\n\nconst initialState: CryptoDictionary = {};\n\nexport const fetchCurrentCryptoPrices = createAsyncThunk(\n  'currentPrices/getCryptosPrices',\n  async () => {\n    const currentPrices = await getCryptosPrices();\n    return currentPrices;\n  }\n);\n\nexport const currentPricesSlice = createSlice({\n  name: 'currentPrices',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchCurrentCryptoPrices.fulfilled, (state, action) => {\n      console.log(action.payload);\n      Object.entries(action.payload).forEach((entry) => {\n        const key = entry[0];\n        const value = entry[1];\n        state[key] = value;\n      });\n    });\n  },\n});\n\nexport const selectCurrentPrices = (state: RootState) => state.currentPrices;\n\nexport default currentPricesSlice.reducer;\n","import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../app/store';\nimport { uuid } from 'uuidv4';\nimport { isBuy, ITransaction, ITransactionAndId } from '../model/ITransaction';\nimport {\n  IDollarCostAverageProfitSummary,\n  IDollarCostAverageSummary,\n  IDollarCostAverageTransactions,\n} from '../model/IDollarCostAverage';\n\nexport interface TranscationsState {\n  transactions: {\n    [id: string]: ITransaction;\n  };\n  summaryData: {\n    dollarCostAveragesTransactions: IDollarCostAverageTransactions;\n    dollarCostAveragesSummary: IDollarCostAverageSummary;\n    dollarCostAveragesProfitsSummary: IDollarCostAverageProfitSummary;\n  };\n}\n\nconst initialState: TranscationsState = {\n  transactions: {},\n  summaryData: {\n    dollarCostAveragesTransactions: {},\n    dollarCostAveragesSummary: {},\n    dollarCostAveragesProfitsSummary: {\n      profits: {},\n      notSoldAmount: {},\n    },\n  },\n};\n\nexport const transactionsSlice = createSlice({\n  name: 'transactionsData',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {\n    addTransaction: (state, action: PayloadAction<ITransaction | null>) => {\n      const id = uuid();\n      if (action.payload) {\n        state.transactions[id] = action.payload;\n      } else {\n        const defaultITransaction: ITransaction = {\n          symbol: '',\n          date: Date.now(),\n          amount: 0,\n          price: 0,\n        };\n        state.transactions[id] = defaultITransaction;\n      }\n    },\n    bulkAddTransactions: (state, action: PayloadAction<ITransaction[]>) => {\n      action.payload.forEach((transaction) => {\n        const id = uuid();\n        state.transactions[id] = transaction;\n      });\n    },\n    deleteAllTransactions: (state) => {\n      state.transactions = {};\n    },\n    updateTransaction: (\n      state,\n      action: PayloadAction<{ id: string; transaction: Partial<ITransaction> }>\n    ) => {\n      const orig = state.transactions[action.payload.id];\n      const update = action.payload.transaction;\n      // hard-code the updated fields\n      if (update.amount !== undefined) orig.amount = update.amount;\n      if (update.date !== undefined) orig.date = update.date;\n      if (update.price !== undefined) orig.price = update.price;\n      if (update.symbol !== undefined) orig.symbol = update.symbol;\n    },\n    removeTransaction: (state, action: PayloadAction<{ id: string }>) => {\n      delete state.transactions[action.payload.id];\n    },\n    updateDollarCostAverageTransactions: (\n      state,\n      action: PayloadAction<IDollarCostAverageTransactions>\n    ) => {\n      state.summaryData.dollarCostAveragesTransactions = action.payload;\n    },\n    updateDollarCostAverageSummary: (\n      state,\n      action: PayloadAction<IDollarCostAverageSummary>\n    ) => {\n      state.summaryData.dollarCostAveragesSummary = action.payload;\n    },\n    updateDollarCostAverageProfitSummary: (\n      state,\n      action: PayloadAction<IDollarCostAverageProfitSummary>\n    ) => {\n      state.summaryData.dollarCostAveragesProfitsSummary = action.payload;\n    },\n  },\n});\n\nexport const {\n  addTransaction,\n  bulkAddTransactions,\n  deleteAllTransactions,\n  updateTransaction,\n  removeTransaction,\n  updateDollarCostAverageTransactions,\n  updateDollarCostAverageSummary,\n  updateDollarCostAverageProfitSummary,\n} = transactionsSlice.actions;\n\nexport const selectTransactions = (state: RootState) =>\n  state.transactionsData.transactions;\nexport const selectDCASummaries = (state: RootState) =>\n  state.transactionsData.summaryData.dollarCostAveragesSummary;\nexport const selectDCATransactions = (state: RootState) =>\n  state.transactionsData.summaryData.dollarCostAveragesTransactions;\nexport const selectDCAProfitSummary = (state: RootState) =>\n  state.transactionsData.summaryData.dollarCostAveragesProfitsSummary;\n\nexport const selectDCATransactionsMemoized = createSelector(\n  [selectTransactions],\n  (transactionsData) => {\n    // deep copy transactions map to a list\n    const transactions: ITransactionAndId[] = Object.entries(\n      transactionsData\n    ).map((entry) => {\n      return {\n        id: entry[0],\n        amount: entry[1].amount,\n        date: entry[1].date,\n        price: entry[1].price,\n        symbol: entry[1].symbol,\n      };\n    });\n\n    // sort transactions by date\n    transactions.sort((a, b) => a.date - b.date);\n\n    /** Map containing buys */\n    const dcaTransactions: IDollarCostAverageTransactions = {};\n    /** Map containing symbols to \"sell transactions\" sorted by date */\n    const sellsMap: Map<string, ITransactionAndId[]> = new Map();\n    transactions.forEach((transaction) => {\n      if (isBuy(transaction)) {\n        dcaTransactions[transaction.id] = {\n          result: {\n            amount: transaction.amount,\n            date: transaction.date,\n            price: transaction.price,\n            symbol: transaction.symbol,\n          },\n          sells: {},\n        };\n      } else {\n        let sellsListForSymbol = sellsMap.get(transaction.symbol);\n        if (!sellsListForSymbol) sellsListForSymbol = [];\n        sellsListForSymbol.push(transaction);\n        sellsMap.set(transaction.symbol, sellsListForSymbol);\n      }\n    });\n\n    // apply all possible sells to each buy\n    const buys = Object.values(dcaTransactions);\n    buys.forEach((dcaTransaction) => {\n      const buy = dcaTransaction.result;\n      // look up based on the symbol\n      const symbol = buy.symbol;\n      const sells = sellsMap.get(symbol);\n      // apply as many sells as possible to each buy\n      while (sells && sells.length !== 0 && buy.amount !== 0) {\n        const sell = sells.pop();\n        if (sell) {\n          let amountApplied = 0;\n          // apply all of the sell to buy\n          if (-1 * sell.amount <= buy.amount) {\n            amountApplied = sell.amount;\n            buy.amount += sell.amount;\n            sell.amount = 0;\n          }\n          // apply partial sell to buy\n          else {\n            amountApplied = -1 * buy.amount;\n            sell.amount += buy.amount;\n            buy.amount = 0;\n            // push the sell back on to use for other buys\n            sells.push(sell);\n          }\n          dcaTransaction.sells[sell.id] = {\n            amount: amountApplied,\n            date: sell.date,\n            price: sell.price,\n            symbol: sell.symbol,\n          };\n        }\n      }\n    });\n    return dcaTransactions;\n  }\n);\n\nexport const selectDCATransactionsAmountRemaining = createSelector(\n  [selectDCATransactionsMemoized],\n  (dcaTransactions) => {\n    // flatten out the transactions to be easily accessible\n    const transactionsAmountLeft: { [id: string]: number } = {};\n    const entries = Object.entries(dcaTransactions);\n    entries.forEach((entry) => {\n      const buyUUID = entry[0];\n      transactionsAmountLeft[buyUUID] = entry[1].result.amount;\n      const sellEntries = Object.entries(entry[1].sells);\n      sellEntries.forEach((sellEntry) => {\n        const sellUUID = sellEntry[0];\n        transactionsAmountLeft[sellUUID] = sellEntry[1].amount;\n      });\n    });\n    return transactionsAmountLeft;\n  }\n);\n\nexport default transactionsSlice.reducer;\n","export interface ITransaction {\n  date: number;\n  symbol: string;\n  amount: number;\n  price: number;\n}\n\nexport function isBuy(transaction: ITransaction) {\n  if (transaction.amount > 0) return true;\n  else return false;\n}\n\n/** Extends the ITransaction interface to add an id field */\nexport interface ITransactionAndId extends ITransaction {\n  id: string;\n}\n","import { Grid } from \"@material-ui/core\";\nimport { useAppSelector } from \"../app/hooks\";\nimport { selectCurrentPrices } from \"../slices/currentPricesSlice\";\nimport { selectDCAProfitSummary, selectDCASummaries } from \"../slices/transactionsSlice\";\nimport { toFixedUnlessZero } from \"../utilities/number-utils\";\n\nexport function DollarCostAverages() {\n    const dcaSummaries = useAppSelector(selectDCASummaries);\n    const dcaProfitSummary = useAppSelector(selectDCAProfitSummary);\n    const currentPrices = useAppSelector(selectCurrentPrices);\n\n    const symbols = Object.keys(dcaSummaries);\n    const symbolsAndPrices = symbols.filter(symbol => currentPrices[symbol]).map(symbol => {\n        return { symbol: symbol, price: currentPrices[symbol] };\n    });\n\n    return <div>\n        <h3>Wallet</h3>\n        <table key=\"wallet\">\n            <tbody>\n                {Object.entries(dcaProfitSummary.notSoldAmount).map((entry) => {\n                    const symbol = entry[0];\n                    const amount = entry[1];\n                    return <tr key={\"wallet-\" + symbol}><td>{symbol}</td><td>{amount.toFixed(2)}</td></tr>\n                })}\n            </tbody>\n        </table>\n        <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n                <h3>Dollar Cost Averages</h3>\n                <table key={\"dca-summary\"}>\n                    <tbody>\n                        {Object.entries(dcaSummaries).map((entry) => {\n                            const symbol = entry[0];\n                            const summary = entry[1];\n                            return <tr key={\"dca-summary-\" + symbol}><td>{symbol}</td><td>${toFixedUnlessZero(summary.price, 2)}</td></tr>\n                        })}\n                    </tbody>\n                </table>\n\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <h3>Current Prices</h3>\n                <table key={\"current-prices\"}>\n                    <tbody>\n                        {symbolsAndPrices.map(data => {\n                            return <tr key={\"current-prices-\" + data.symbol}><td>{data.symbol}</td><td>${toFixedUnlessZero(data.price, 2)}</td></tr>\n                        })}\n                    </tbody>\n                </table>\n\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <h3>Unrealized Profits</h3>\n                <table key=\"dca-unrealized-profits\">\n                    <tbody>\n                        {Object.entries(dcaProfitSummary.notSoldAmount).map((entry) => {\n                            const symbol = entry[0];\n                            const amount = entry[1];\n                            const dcaPrice = dcaSummaries[symbol].price;\n                            const totalCost = dcaPrice * amount;\n                            const potentialEarnings = currentPrices[symbol] * amount;\n                            const unrealizedProfits = potentialEarnings - totalCost;\n                            return <tr key={\"dca-unrealized-profits-\" + symbol}><td>{symbol}</td><td>${unrealizedProfits.toFixed(2)}</td></tr>\n                        })}\n                    </tbody>\n                </table>\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <h3>Profits</h3>\n                <table key=\"dca-profits\">\n                    <tbody>\n                        {Object.entries(dcaProfitSummary.profits).map((entry) => {\n                            const symbol = entry[0];\n                            const profits = entry[1];\n                            return <tr key={\"dca-profits-\" + symbol}><td>{symbol}</td><td>${profits.toFixed(2)}</td></tr>\n                        })}\n                        <tr key={\"dca-profits-sum\"}><td>Total</td><td>${Object.values(dcaProfitSummary.profits).reduce((prev, curr) => prev + curr, 0).toFixed(2)}</td></tr>\n                    </tbody>\n                </table>\n            </Grid>\n        </Grid>\n\n    </div>\n}","import {\n  IDollarCostAverageProfitSummary,\n  IDollarCostAverageSummary,\n  IDollarCostAverageTransactions,\n} from '../model/IDollarCostAverage';\nimport { ITransaction } from '../model/ITransaction';\n\nfunction addToSumMap(map: Map<string, number>, symbol: string, amount: number) {\n  let sum = map.get(symbol);\n  if (!sum) sum = 0;\n  sum += amount;\n  map.set(symbol, sum);\n}\n\nexport function summarizeDollarCostAverageTransactions(\n  dcaTransactions: IDollarCostAverageTransactions\n) {\n  // sum up the amount left per symbol\n  const symbolToAmountsSumMap: Map<string, number> = new Map<string, number>();\n  // sum up the (amount * price) left per symbol for a weighted sum\n  const symbolToWeightedSumMap: Map<string, number> = new Map<string, number>();\n  Object.keys(dcaTransactions).forEach((buyId) => {\n    const buy = dcaTransactions[buyId];\n    if (buy.result.amount !== 0) {\n      const symbol = buy.result.symbol;\n      addToSumMap(symbolToAmountsSumMap, symbol, buy.result.amount);\n      addToSumMap(\n        symbolToWeightedSumMap,\n        symbol,\n        buy.result.amount * buy.result.price\n      );\n    }\n  });\n\n  const dcaSummary: IDollarCostAverageSummary = {};\n  symbolToAmountsSumMap.forEach((amountSum, symbol) => {\n    const weightedSum = symbolToWeightedSumMap.get(symbol);\n    if (weightedSum) {\n      const dcaPrice = weightedSum / amountSum;\n      dcaSummary[symbol] = {\n        symbol: symbol,\n        price: dcaPrice,\n      };\n    }\n  });\n  return dcaSummary;\n}\n\nexport function summarizeProfitsFromDollarCostAverageTransactions(\n  dcaTransactions: IDollarCostAverageTransactions,\n  transactionsData: { [id: string]: ITransaction }\n) {\n  const symbolToSpendingsSumMap: Map<string, number> = new Map<\n    string,\n    number\n  >();\n  const symbolToEarningsSumMap: Map<string, number> = new Map<string, number>();\n  const symbolToAmountNotSoldMap: Map<string, number> = new Map<\n    string,\n    number\n  >();\n  Object.keys(dcaTransactions).forEach((buyId) => {\n    const buy = dcaTransactions[buyId];\n    const symbol = buy.result.symbol;\n    const sellIds = Object.keys(buy.sells);\n\n    const amountNotSold = buy.result.amount;\n    const amountSold = transactionsData[buyId].amount - amountNotSold;\n\n    // sum up how much was bought but not sold\n    if (amountNotSold !== 0) {\n      addToSumMap(symbolToAmountNotSoldMap, symbol, amountNotSold);\n    }\n    // sum up how much was bought and sold\n    addToSumMap(\n      symbolToSpendingsSumMap,\n      symbol,\n      amountSold * transactionsData[buyId].price\n    );\n    sellIds.forEach((sellId) => {\n      const sell = buy.sells[sellId];\n      // sum up returns\n      const returns = -1 * sell.amount * sell.price;\n      // add to earnings\n      addToSumMap(symbolToEarningsSumMap, symbol, returns);\n    });\n  });\n\n  // combine\n  const symbolToProfitsSumMap: Map<string, number> = new Map<string, number>();\n  symbolToSpendingsSumMap.forEach((val, key) =>\n    addToSumMap(symbolToProfitsSumMap, key, -1 * val)\n  );\n  symbolToEarningsSumMap.forEach((val, key) =>\n    addToSumMap(symbolToProfitsSumMap, key, val)\n  );\n\n  // return\n  const profitSummary: IDollarCostAverageProfitSummary = {\n    profits: {},\n    notSoldAmount: {},\n  };\n  symbolToProfitsSumMap.forEach(\n    (val, key) => (profitSummary.profits[key] = val)\n  );\n  symbolToAmountNotSoldMap.forEach(\n    (val, key) => (profitSummary.notSoldAmount[key] = val)\n  );\n  return profitSummary;\n}\n","import React, { useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from './app/hooks';\nimport { DataTable } from './components/DataTable';\nimport { DollarCostAverages } from './components/DollarCostAverages';\nimport { ITransaction } from './model/ITransaction';\nimport { addTransaction, bulkAddTransactions, deleteAllTransactions, removeTransaction, selectDCATransactionsAmountRemaining, selectDCATransactionsMemoized, selectTransactions, updateDollarCostAverageProfitSummary, updateDollarCostAverageSummary, updateDollarCostAverageTransactions, updateTransaction } from './slices/transactionsSlice';\nimport { summarizeDollarCostAverageTransactions, summarizeProfitsFromDollarCostAverageTransactions } from './utilities/transaction-utils';\nimport { fetchCurrentCryptoPrices } from './slices/currentPricesSlice';\n\n\nfunction App() {\n  const dispatch = useAppDispatch();\n\n  const transactions = useAppSelector(selectTransactions);\n  const dcaTransactions = useAppSelector(selectDCATransactionsMemoized);\n  const dcaTransactionsRemaining = useAppSelector(selectDCATransactionsAmountRemaining);\n\n  function handleCreateTransaction(transaction?: ITransaction) {\n    dispatch(addTransaction(transaction ? transaction : null));\n  }\n\n  function handleUpdateTransaction(id: string, transaction: Partial<ITransaction>) {\n    dispatch(updateTransaction({ id: id, transaction: transaction }));\n  }\n\n  function handleDeleteTransaction(id: string) {\n    dispatch(removeTransaction({ id: id }));\n  }\n\n  function handleImportTransactionsComplete(transactions: ITransaction[]) {\n    dispatch(deleteAllTransactions());\n    dispatch(bulkAddTransactions(transactions));\n  }\n\n  // on open, fetch current prices\n  useEffect(() => {\n    dispatch(fetchCurrentCryptoPrices())\n  }, [dispatch])\n\n  // leverage React to listen to changes in state and convert to chart data accordingly\n  useEffect(() => {\n    const dcaSummary = summarizeDollarCostAverageTransactions(dcaTransactions);\n    const dcaProfitSummary = summarizeProfitsFromDollarCostAverageTransactions(dcaTransactions, transactions);\n    summarizeProfitsFromDollarCostAverageTransactions(dcaTransactions, transactions);\n    dispatch(updateDollarCostAverageTransactions(dcaTransactions));\n    dispatch(updateDollarCostAverageSummary(dcaSummary));\n    dispatch(updateDollarCostAverageProfitSummary(dcaProfitSummary));\n  }, [dispatch, transactions, dcaTransactions])\n  return (\n    <div>\n      <DollarCostAverages></DollarCostAverages>\n      <DataTable title=\"Cryptos\" data={transactions} dcaData={dcaTransactionsRemaining} addRow={handleCreateTransaction} updateRow={handleUpdateTransaction} deleteRow={handleDeleteTransaction} onImportComplete={handleImportTransactionsComplete} ></DataTable>\n      <div style={{ height: 100 }}></div>\n    </div>\n  );\n}\n\nexport default App;\n\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport currentPricesSlice from '../slices/currentPricesSlice';\nimport transactionsSlice from '../slices/transactionsSlice';\n\nexport const store = configureStore({\n  reducer: {\n    transactionsData: transactionsSlice,\n    currentPrices: currentPricesSlice,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType !==null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}